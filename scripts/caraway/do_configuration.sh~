#!/bin/bash -xe
rm -f CMakeCache.txt
rm -rf CMakeFiles

#OBDIR=/ascldap/users/fnrizzi/tpls/openblas-install

cmake \
    -D CMAKE_CXX_COMPILER=hipcc \
    -D CMAKE_VERBOSE_MAKEFILE=On \
    -D CMAKE_CXX_STANDARD=14 \
    -D CMAKE_CXX_FLAGS="-g" \
    -D CMAKE_C_COMPILER=hipcc \
    -D CMAKE_C_FLAGS="-g" \
    -D Kokkos_ENABLE_HIP=ON \
    -D BUILD_SHARED_LIBS=ON \
    -D Kokkos_ARCH_VEGA908=ON \
    -D ROCM_SEARCH_PATH="/ascldap/users/fnrizzi/repos/rocSOLVER/build/release/rocsolver-install;/ascldap/users/fnrizzi/repos/rocPRIM/priminstall;/ascldap/users/fnrizzi/repos/rocThrust/thinstall" \
    ..



#-D LAPACK_LIBS=${OBDIR}/lib/libopenblas.so \
